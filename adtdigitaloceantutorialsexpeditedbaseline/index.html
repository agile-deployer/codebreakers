<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>DigitalOcean ADT Tutorials Expedited Baseline Joomla | Codebreakers</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="DigitalOcean ADT Tutorials Expedited Baseline Joomla" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Agile Deployment Toolkit DigitalOcean Tutorials Expedited Baseline Joomla" />
<meta property="og:description" content="The Agile Deployment Toolkit DigitalOcean Tutorials Expedited Baseline Joomla" />
<link rel="canonical" href="https://www.codebreakers.uk/adtdigitaloceantutorialsexpeditedbaseline/" />
<meta property="og:url" content="https://www.codebreakers.uk/adtdigitaloceantutorialsexpeditedbaseline/" />
<meta property="og:site_name" content="Codebreakers" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-01T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2021-11-01T00:00:00-05:00","url":"https://www.codebreakers.uk/adtdigitaloceantutorialsexpeditedbaseline/","@type":"BlogPosting","headline":"DigitalOcean ADT Tutorials Expedited Baseline Joomla","dateModified":"2021-11-01T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.codebreakers.uk/adtdigitaloceantutorialsexpeditedbaseline/"},"description":"The Agile Deployment Toolkit DigitalOcean Tutorials Expedited Baseline Joomla","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://www.codebreakers.uk/feed.xml" title="Codebreakers" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Codebreakers</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">DigitalOcean ADT Tutorials Expedited Baseline Joomla</h1><p class="page-description">The Agile Deployment Toolkit DigitalOcean Tutorials Expedited Baseline Joomla</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-11-01T00:00:00-05:00" itemprop="datePublished">
        Nov 1, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      5 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="//categories/#agiledeploymenttoolkit">agiledeploymenttoolkit</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><strong>PREBUILD NECESSITIES</strong></p>

<p>If you don’t already have a build machine running in the DigitalOcean cloud, follow these steps to get ready for the main build)</p>

<ol>
  <li>
    <p>Begin by following this: <a href="https://www.codebreakers.uk/adtdigitaloceantutorialsbuildmachineexpedited/">Build Machine Setup</a></p>
  </li>
  <li>
    <p>At this point, your build machine should be up and running. Please review <a href="https://github.com/agile-deployer/agile-infrastructure-build-client-scripts/blob/master/doco/AgileToolkitDeployment/TightenBuildMachineAccess.md">Tightening Build Machine Firewall</a>. At this point, your build machine will only accept connections from your laptop. If you need access from other ip addresses you need to use the technique described in “Tightening Build Machine Firewall” to grant access to additional IP addresses. This will be the case every time your laptop changes its IP address as you travel about, so, you might want to setup and configure an S3 client on your laptop to enable you to grant access to new IP addresses easily.</p>
  </li>
</ol>

<hr />

<p><strong>EXPEDITED BUILD PROCESS</strong></p>

<p>If you have followed the tutorial <a href="https://www.codebreakers.uk/adtdigitaloceantutorialsexpeditedvirgin">here</a>, then you will have an active Joomla, or possibly Wordpress, Drupal or Moodle installation active through your web browser.
What you need to do now is to customise your version of (Joomla) so that it is a specialised application for example a blog or a social network and so on.</p>

<p>What I have done for this tutorial is install a very simple application using a tool called “Community Builder” which you can find here: <a href="https://www.joomlapolis.com">Community Builder</a>. Literally all I have done is install the latest version (at the time) into my Joomla installation that I installed earlier.</p>

<p>The next thing I have to do is to generate a baseline of my application so that the baseline can be redeployed. A baseline is stored with whatever git provider you have set in your template when you made your deployment. In my case my git account is my “adt-demos” account with Github.</p>

<p>In order to create the baseline I am going to deploy, I need to do the following:</p>

<ol>
  <li>Choose a unique identifier for my baseline repositories, in this case I am going to call them, “communitybuilder” yours will be a different name.</li>
  <li>Go to you git provider account console with your browser, in this case it is my “adt-demos” account with Github and create two private repositories:</li>
</ol>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>communitybuilder-webroot-sourcecode-baseline
communitybuilder-db-baseline
</code></pre></div>  </div>
</blockquote>

<p>Once these two repositories have been created you are ready to make a baseline of the joomla install that you have modified.</p>

<ol>
  <li>To generate your baseline, you have to run two commands on your build machine. At the command prompt of your build machine cd into the <strong>helperscripts</strong> directory of your agile deployment toolkit installation. In my case it is like this:</li>
</ol>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /home/agile-deployer/agile-infrastructure-build-client-scripts/helperscripts
</code></pre></div>  </div>
</blockquote>

<p>Once you are in that directory, you need to issue the command:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/bin/sh PerformWebsiteBaseline.sh
</code></pre></div>  </div>
</blockquote>

<p>Once that starts running, you need to answer the questions you are prompted for entering, “communitybuilder” if you are prompted for an identifier.</p>

<p>In a minute or two your webiste baseline will have been generated and you should check in its repository that sourceode has been generated to it.</p>

<p>Now you need to generate a baseline of the database. To do that you need to issue the command:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/bin/sh PerformDatabaseBaseline.sh
</code></pre></div>  </div>
</blockquote>

<p>If there is a prompt for an identifier, I enter “communitybuilder” and make very sure that the repository communitybuilder-db-baseline exists</p>

<p>In short order, my database is backed up to the Github repository and again, I should check that the repository I have chosen has been updated using the github console.</p>

<hr />

<p>My application baselines are now complete. The process for generating baselines is the same whichever application type you have built, Joomla, Wordpress, Drupal or Moodle.</p>

<p>The next step is to make a deployment of these baselines. So, if I have any webservers or databases running with my cloudhost, I need to take them off line (shut them down) and destroy them.</p>

<p>I am then interested in template 2 because that is the template that is used for deploying baselined application. If its not clear, template 1 is used for virgin CMS deployments, template 2 is used for baselined application deployments and template 3 is used for temporal deployments.</p>

<p>So, template 2 is located here on my build machine:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/home/agile-deployer/agile-infrastructure-build-client-scripts/templatedconfigurations/templates/digitalocean/digitalocean2.tmpl
</code></pre></div>  </div>
</blockquote>

<p>I can copy the credentials that I need from the values that I set them to previously in template1. So, looking in template1,</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/home/agile-deployer/agile-infrastructure-build-client-scripts/templatedconfigurations/templates/digitalocean/digitalocean1.tmpl
</code></pre></div>  </div>
</blockquote>

<p>I can extract the values for the following variables:</p>
<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export TOKEN="AAAAA"   #MANDATORY
export S3_ACCESS_KEY="BBBBB"  #MANDATORY
export S3_SECRET_KEY="CCCCC"  #MANDATORY
export DNS_USERNAME="testemail@testemail.com"  #MANDATORY
export DNS_SECURITY_KEY="AAAAA"   #MANDATORY - This is your personal access token, DNS_SECURITY_KEY=${TOKEN}
export CLOUDHOST_EMAIL_ADDRESS="testemail@testemail.com" #MANDATORY
export WEBSITE_DISPLAY_NAME="Test Social Network" #MANDATORY
export WEBSITE_NAME="testsocialnetwork" #MANDATORY - This is the exact value of the core of your WEBSITE_URL, for example, www.nuocial.org.uk would be nuocial
export WEBSITE_URL="www.testsocialnetwork.org.uk"  #MANDATORY
export APPLICATION_REPOSITORY_OWNER="mytestgituser" #MANDATORY
export APPLICATION_REPOSITORY_USERNAME="mytestgituser" #MANDATORY
export APPLICATION_REPOSITORY_TOKEN="KKKKK" #MANDATORY
</code></pre></div>  </div>
</blockquote>

<p>What I then do is adjust /home/agile-deployer/agile-infrastructure-build-client-scripts/templatedconfigurations/templates/digitalocean/digitalocean2.tmpl to contain these values instead of its defaults.</p>

<p>With that done, because I used “Postgres” which from the file dbe.dat in the webroot of my baseline when I deployed Joomla originally, I need to make sure that I set the database to use as follows:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export DATABASE_INSTALLATION_TYPE="Postgres"
</code></pre></div>  </div>
</blockquote>

<p>There are some other values that I need to change in /home/agile-deployer/agile-infrastructure-build-client-scripts/templatedconfigurations/templates/digitalocean/digitalocean2.tmpl, as follows:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export APPLICATION="joomla" #MANDATORY (joomla or wordpress or drupal or moodle)
export APPLICATION_IDENTIFIER="1" #MANDATORY (1 for joomla, 2 for wordpress, 3 for drupal, 4 for moodle)
export BASELINE_DB_REPOSITORY="communitybuilder-db-baseline" #MANDATORY
export APPLICATION_BASELINE_SOURCECODE_REPOSITORY="communitybuilder-webroot-sourcecode-baseline" #MANDATORY
export PERSIST_ASSETS_TO_CLOUD="0" #MANDATORY This should only be 0 if your application has a very small number of assets
export DIRECTORIES_TO_MOUNT="" #MANDATORY - this will define which directories in your webroot will be mounted from S3, if PERSIST_ASSETS_TO_CLOUD=1
</code></pre></div>  </div>
</blockquote>

<p>You can make any other adjustments you want like if you want to choose APACHE instead of NGINX or change the size of the machines (you can find out about such things in the specification).</p>

<p>With your baseline template fully configured, you are now ready to perform a baseline build (in other words, directly install a live application starting from zilch).
That will look something like the following:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/PR7R2Mrj59w" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>If you follow these steps, then, you will have a copy of your customised Joomla application running in the cloud. 
<strong>Leave the servers you have deployed running for use in the next tutorial in the series.</strong></p>

  </div><a class="u-url" href="/adtdigitaloceantutorialsexpeditedbaseline/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>The main website for the codebreakers project</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/fastai" target="_blank" title="fastai"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/fastdotai" target="_blank" title="fastdotai"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
