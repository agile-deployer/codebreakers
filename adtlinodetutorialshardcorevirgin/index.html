<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Linode ADT Tutorials Hardcore Virgin Joomla | Codebreakers</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Linode ADT Tutorials Hardcore Virgin Joomla" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Agile Deployment Toolkit Linode Tutorials Hardcore Virgin Joomla" />
<meta property="og:description" content="The Agile Deployment Toolkit Linode Tutorials Hardcore Virgin Joomla" />
<link rel="canonical" href="https://www.codebreakers.uk/adtlinodetutorialshardcorevirgin/" />
<meta property="og:url" content="https://www.codebreakers.uk/adtlinodetutorialshardcorevirgin/" />
<meta property="og:site_name" content="Codebreakers" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-01T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2021-11-01T00:00:00-05:00","url":"https://www.codebreakers.uk/adtlinodetutorialshardcorevirgin/","@type":"BlogPosting","headline":"Linode ADT Tutorials Hardcore Virgin Joomla","dateModified":"2021-11-01T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.codebreakers.uk/adtlinodetutorialshardcorevirgin/"},"description":"The Agile Deployment Toolkit Linode Tutorials Hardcore Virgin Joomla","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://www.codebreakers.uk/feed.xml" title="Codebreakers" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Codebreakers</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Linode ADT Tutorials Hardcore Virgin Joomla</h1><p class="page-description">The Agile Deployment Toolkit Linode Tutorials Hardcore Virgin Joomla</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-11-01T00:00:00-05:00" itemprop="datePublished">
        Nov 1, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      11 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="//categories/#agiledeploymenttoolkit">agiledeploymenttoolkit</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <hr />
<h4 id="it-is-a-bit-more-effort-to-get-a-hardcore-build-completed-but-once-it-is-done-you-will-have-a-stackscript-which-you-can-configure-directly-and-repeatedly-for-your-uses">IT IS A BIT MORE EFFORT TO GET A HARDCORE BUILD COMPLETED, BUT, ONCE IT IS DONE YOU WILL HAVE A STACKSCRIPT WHICH YOU CAN CONFIGURE DIRECTLY AND REPEATEDLY FOR YOUR USES</h4>
<hr />

<p><strong>HARDCORE BUILD PROCESS</strong></p>

<ol>
  <li>On your laptop perform the following command:</li>
</ol>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/agile-deployer/agile-infrastructure-build-client-scripts.git
</code></pre></div>  </div>
</blockquote>

<p>We need several pieces of information from our cloud host and 3rd party services for a successful build to be possible:</p>

<p>I am going to use the example of joomla to build from and so this example will build a virgin installation of the latest version of joomla</p>

<p>This tutorial will deploy the latest version of Joomla using template 1 which you can read about here with the clone you have just made onto your laptop:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./agile-infrastructure-build-client-scripts/templatedconfigurations/templates/linode/linode1.description and the hardcore method.
</code></pre></div>  </div>
</blockquote>

<hr />

<p><strong>Record and save the credentials you are about to create in a secure file on your laptop</strong></p>

<p>To find the latest version of Joomla, I go to this URL in my browser:</p>

<p><a href="https://downloads.joomla.org/">Joomla Latest</a></p>

<p>And I note the latest version in a separate text file:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>joomla_version="4.0.4"  
</code></pre></div>  </div>
</blockquote>

<p>You can of course use a legacy version of joomla also by choosing a different version numnber.</p>

<hr />

<blockquote>
  <p>I then need a personal access token for Linode, I go to the top right and select “API Keys” and generate a personal access token with</p>
</blockquote>

<blockquote>
  <p>“Account,Domains, Images, IPs, Linodes, Object Storage, Stackscripts and Volumes”</p>
</blockquote>

<blockquote>
  <p>scope enabled. This personal access token I shall call “AAAAA”</p>
</blockquote>

<p><strong>IMPORTANT EDIT: To use the native firewalling system the linode-cli tool seems to only accept personal access tokens with full access rights, so, whilst that is the case, you will need to ignore the above scoping and just chose “Select All” with “Read and Write” access when you create your personal access token.</strong></p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>linode_personal_access_token="AAAAA"  where AAAAA is the actual values generated when I click "Create Token"
</code></pre></div>  </div>
</blockquote>

<hr />

<p>You now need to set up Object Storage and obtain Object Storage Keys. You can do this by Selecting Object Storage on the left hand side of your Linode console.</p>

<p>You then click “Access Key” and then, “Create Access Key” and this will display an “Access Key” and a “Secret Key” which you need to make a note of and keep safe:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>linode_S3_access_key="BBBBB"
linode_S3_secret_key="CCCCC"
</code></pre></div>  </div>
</blockquote>

<hr />

<p>You now need to make a note of the email address that you have registered with your linode account:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>linode_email="testemail@testemail.com"
</code></pre></div>  </div>
</blockquote>

<hr />

<p>You then need the url that you want to use for your website. If you don’t have a DNS URL for your website, you need to purchase one and set the nameservers to linode as described in ./agile-infrastructure-build-client-scripts/blob/master/doco/AgileToolkitDeployment/Nameservers.md</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>linode_dns_name="www.testsocialnetwork.org.uk"
</code></pre></div>  </div>
</blockquote>

<hr />

<p>You then need the username and owner of you git provider application repositories.</p>

<p>To do this, if you don’t have a git account sign up with one (in this case using github, but, you have the choice of bitbucket and gitlab as well) and record the username that you sign up with:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gitusername="mytestgituser"
</code></pre></div>  </div>
</blockquote>

<p>Then create a “personal access token” by following:</p>

<p><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">Personal Access Token</a> making sure you give it all “repo” permissions as well as the “delete repository” permission</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gitpersonalaccesstoken="KKKKK" where KKKKK represents your actual personal access token
</code></pre></div>  </div>
</blockquote>

<hr />

<p>To keep this as simple as possible, I have missed out the SMTP credentials, but, you can find out more about them</p>

<p><a href="https://github.com/agile-deployer/agile-infrastructure-build-client-scripts/blob/master/doco/AgileToolkitDeployment/DeployingSMTPService.md">Deploying SMTP Service</a></p>

<p>If you wish to include SMTP credentials you will need to have a service offering set up with either sendpulse, mailjet or AWS SES.</p>

<hr />

<p><strong>NOTE:</strong> 
<strong>The CLOUDHOST_PASSWORD value must be set in your template for a linode based build to succeed.</strong></p>

<hr />

<p>So, that should be all the core credentials that I need to make a deployment. I can save my text file now (and keep it secure) because I might want to use these credentials again for other deployments or redeployments.</p>

<hr />
<hr />

<p>So, to begin an hardcore build process, I need to:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi ./agile-infrastructure-build-client-scripts/templatedconfigurations/templates/linode/linode1.tmpl
</code></pre></div>  </div>
</blockquote>

<p>This file looks like this (I have put a dashes before each line I wish to modify for this deployment which is for illustrative purposes only):</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>###############################################################################################
# Refer to: ${BUILD_HOME}/templatedconfigurations/specification.md
###############################################################################################
----- export APPLICATION=""
----- export JOOMLA_VERSION="" #MANDATORY - change this to the version you want to deploy, for example 4.0.3 set it to "" if you are deploying anything but joomla
export DRUPAL_VERSION="9.2.1"  #MANDATORY - change this to the version you want to deploy, for example, 9.2.6 set it to "" if you are deploying anything but drupal
----- export APPLICATION_BASELINE_SOURCECODE_REPOSITORY="" #MANDATORY 
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
# change this to, for example, JOOMLA:4.0.3 if you are deploying drupal (APPLICATION=joomla)
# change this to, WORDPRESS if you are deploying wordpress
# change this to, for example, DRUPAL:9.2.6 if you are deploying drupal (APPLICATION=drupal)
# change this to, MOODLE if you are deploying moodle
#############################################################################################
----- export S3_ACCESS_KEY=""  #MANDATORY
----- export S3_SECRET_KEY=""  #MANDATORY
export S3_HOST_BASE="eu-central-1.linodeobjects.com" #MANDATORY
export S3_LOCATION="US" #For linode, this always needs to be set to "US"
------ export TOKEN="" #MANDATORY this is your linode personal access token
export ACCESS_KEY=""   #NOT REQUIRED
export SECRET_KEY=""   #NOT REQUIRED
----- export DNS_USERNAME=""  #MANDATORY
----- export DNS_SECURITY_KEY=""   #MANDATORY
export DNS_CHOICE="linode" #MANDATORY - you will need to set your DNS nameservers according to this choice
----- export CLOUDHOST_EMAIL_ADDRESS="" #MANDATORY
export BUILDOS="" #MANDATORY one of ubuntu|debian
export BUILDOS_VERSION="" #MANDATORY one of 20.04|10
export DEFAULT_USER="root" #MANDATORY - This should always be 'root' on linode
----- export BUILD_IDENTIFIER="" #MANDATORY
----- export WEBSITE_DISPLAY_NAME="" #MANDATORY
----- export WEBSITE_NAME="" #MANDATORY - This is the exact value of the core of your WEBSITE_URL, for example, www.nuocial.org.uk would be nuocial
----- export WEBSITE_URL=""  #MANDATORY
----- export APPLICATION_REPOSITORY_PROVIDER="" #MANDATORY
----- export APPLICATION_REPOSITORY_OWNER="" #MANDATORY
----- export APPLICATION_REPOSITORY_USERNAME="" #MANDATORY
export APPLICATION_REPOSITORY_PASSWORD="" #MANDATORY
----- export APPLICATION_REPOSITORY_TOKEN="" #MANDATORY
export SYSTEM_EMAIL_PROVIDER="" #MANDATORY
export SYSTEM_TOEMAIL_ADDRESS="" #MANDATORY
export SYSTEM_FROMEMAIL_ADDRESS="" #MANDATORY
export SYSTEM_EMAIL_USERNAME="" #MANDATORY
export SYSTEM_EMAIL_PASSWORD="" #MANDATORY
export DIRECTORIES_TO_MOUNT="" #This should always be unset for a virgin deployments
export DB_PORT="2035"
export SSH_PORT="1035"
export GATEWAY_GUARDIAN="0"
export PRODUCTION="0"
export DEVELOPMENT="1"
export BUILD_CHOICE="0"
----- export WEBSERVER_CHOICE="APACHE"
export NO_AUTOSCALERS="1"
export NUMBER_WS="1"
export SUPERSAFE_WEBROOT="1"
export SUPERSAFE_DB="1"
----- export DATABASE_INSTALLATION_TYPE="MySQL"
export PERSIST_ASSETS_TO_CLOUD="0" #This should always be set to 0 for a virgin deployment
export DISABLE_HOURLY="0"
export SERVER_TIMEZONE_CONTINENT="Europe"
export SERVER_TIMEZONE_CITY="London"
export BASELINE_DB_REPOSITORY="VIRGIN"
export BUILD_ARCHIVE_CHOICE="virgin"
export APPLICATION_LANGUAGE="PHP"
----- export APPLICATION_IDENTIFIER="0"
export PHP_VERSION="7.4"
export REGION=""
export REGION_ID="eu-central"
export DB_SIZE="g6-nanode-1"
export DB_SERVER_TYPE="g6-nanode-1"
export WS_SIZE="g6-nanode-1"
export WS_SERVER_TYPE="g6-nanode-1"
export AS_SIZE="g6-nanode-1"
export AS_SERVER_TYPE="g6-nanode-1"
export CLOUDHOST="linode"
export MACHINE_TYPE="LINODE"
export ALGORITHM="rsa"
export USER="root"
export CLOUDHOST_USERNAME="root"
----- export CLOUDHOST_PASSWORD=""
export PUBLIC_KEY_NAME="AGILE_TOOLKIT_PUBLIC_KEY"
export PREVIOUS_BUILD_CONFIG="0"
export GIT_USER="Templated User"
export GIT_EMAIL_ADDRESS="templateduser@dummyemailZ123.com"
export INFRASTRUCTURE_REPOSITORY_PROVIDER="github"
export INFRASTRUCTURE_REPOSITORY_OWNER="agile-deployer"
export INFRASTRUCTURE_REPOSITORY_USERNAME="agile-deployer"
export INFRASTRUCTURE_REPOSITORY_PASSWORD="none"
export DATASTORE_CHOICE="linode"
export SSL_GENERATION_METHOD="AUTOMATIC"
export SSL_GENERATION_SERVICE="LETSENCRYPT"
export BYPASS_DB_LAYER="0"
export DBaaS_HOSTNAME=""
export DBaaS_USERNAME=""
export DBaaS_PASSWORD=""
export DBaaS_DBNAME=""
export DATABASE_DBaaS_INSTALLATION_TYPE=""
export DBaaSDBSECURITYGROUP=""
export DBIP=""
export DBIP_PRIVATE=""
export WSIP=""
export WSIP_PRIVATE=""
export ASIP=""
export ASIP_PRIVATE=""
export APPLICATION_NAME=""
export MAPS_API_KEY=""
export PHP_MODE=""
export PHP_MAX_CHILDREN=""
export PHP_START_SERVERS=""
export PHP_MIN_SPARE_SERVERS=""
export PHP_MAX_SPARE_SERVERS=""
export PHP_PROCESS_IDLE_TIMEOUT=""
export IN_MEMORY_CACHING=""
export IN_MEMORY_CACHING_PORT=""
export IN_MEMORY_CACHING_HOST=""
export IN_MEMORY_CACHING_SECURITY_GROUP=""
export ENABLE_EFS=""
export SUBNET_ID=""
export AUTOSCALE_FROM_SNAPSHOTS=""
export GENERATE_SNAPSHOTS=""
export SNAPSHOT_ID=""
export WEBSERVER_IMAGE_ID=""
export AUTOSCALER_IMAGE_ID=""
export DATABASE_IMAGE_ID=""
export BUILD_HOME=""
export BUILD_CLIENT_IP=""
export PUBLIC_KEY_ID=""
</code></pre></div>  </div>
</blockquote>

<p>So, I have referred to the specification and I have freely chosen to modify the</p>

<p><strong>WEBSERVER_CHOICE to “NGINX”</strong><br />
<strong>PHP_VERSION to “8.0”</strong><br />
<strong>APPLICATION_IDENTIFIER to “1”</strong><br />
<strong>DATABASE_INSTALLATION_TYPE to “Postgres”</strong></p>

<p>So, editing</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi ./agile-infrastructure-build-client-scripts/templatedconfigurations/templates/linode/linode1.tmpl   
</code></pre></div>  </div>
</blockquote>

<p>and using the values I recorded in my text file earlier, I modify the file as follows, the lines beginning with dashes have been modified</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>###############################################################################################
# Refer to: ${BUILD_HOME}/templatedconfigurations/specification.md
###############################################################################################
------export APPLICATION="joomla"
------export JOOMLA_VERSION="4.0.4" #MANDATORY - change this to the version you want to deploy, for example 4.0.3 set it to "" if you are deploying anything but joomla
export DRUPAL_VERSION=""  #MANDATORY - change this to the version you want to deploy, for example, 9.2.6 set it to "" if you are deploying anything but drupal
-------export APPLICATION_BASELINE_SOURCECODE_REPOSITORY="JOOMLA:4.0.4" #MANDATORY 
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
# change this to, for example, JOOMLA:4.0.3 if you are deploying drupal (APPLICATION=joomla)
# change this to, WORDPRESS if you are deploying wordpress
# change this to, for example, DRUPAL:9.2.6 if you are deploying drupal (APPLICATION=drupal)
# change this to, MOODLE if you are deploying moodle
#############################################################################################
----- export S3_ACCESS_KEY="BBBBB"  #MANDATORY
----- export S3_SECRET_KEY="CCCCC"  #MANDATORY
export S3_HOST_BASE="eu-central-1.linodeobjects.com" #MANDATORY
export S3_LOCATION="US" #For linode, this always needs to be set to "US"
------ export TOKEN="AAAAA" #MANDATORY this is your linode personal access token
export ACCESS_KEY=""   #NOT REQUIRED
export SECRET_KEY=""   #NOT REQUIRED
------export DNS_USERNAME="testemail@testemail.com"  #MANDATORY
------export DNS_SECURITY_KEY="AAAAA" 
export DNS_CHOICE="linode" #MANDATORY - you will need to set your DNS nameservers according to this choice
------export CLOUDHOST_EMAIL_ADDRESS="testemail@testemail.com" #MANDATORY
export BUILDOS="debian" #MANDATORY one of ubuntu|debian
export BUILDOS_VERSION="11" #MANDATORY one of 20.04|10 11
export DEFAULT_USER="debian" #MANDATORY - - This must be "ubuntu" if you are deploying ubuntu and "debian" if you are deploying debian
------export WEBSITE_DISPLAY_NAME="Test Social Network" #MANDATORY
------export WEBSITE_NAME="testsocialnetwork" #MANDATORY - This is the exact value of the core of your WEBSITE_URL, for example, www.nuocial.org.uk would be nuocial
------export WEBSITE_URL="www.testsocialnetwork.org.uk"  #MANDATORY
export APPLICATION_REPOSITORY_PROVIDER="github" #MANDATORY
------export APPLICATION_REPOSITORY_OWNER="mytestgituser" #MANDATORY
------export APPLICATION_REPOSITORY_USERNAME="mytestgituser" #MANDATORY
export APPLICATION_REPOSITORY_PASSWORD="" #MANDATORY
------export APPLICATION_REPOSITORY_TOKEN="KKKKK" #MANDATORY
export SYSTEM_EMAIL_PROVIDER="" #MANDATORY
export SYSTEM_TOEMAIL_ADDRESS="" #MANDATORY
export SYSTEM_FROMEMAIL_ADDRESS="" #MANDATORY
export SYSTEM_EMAIL_USERNAME="" #MANDATORY
export SYSTEM_EMAIL_PASSWORD="" #MANDATORY
export DIRECTORIES_TO_MOUNT="" #This should always be unset for a virgin deployments
export DB_PORT="2035"
export SSH_PORT="1035"
export GATEWAY_GUARDIAN="0"
export PRODUCTION="0"
export DEVELOPMENT="1"
export BUILD_CHOICE="0"
----- export WEBSERVER_CHOICE="NGINX"
export NO_AUTOSCALERS="1"
export NUMBER_WS="1"
export SUPERSAFE_WEBROOT="1"
export SUPERSAFE_DB="1"
----- export DATABASE_INSTALLATION_TYPE="Postgres"
export PERSIST_ASSETS_TO_CLOUD="0" #This should always be set to 0 for a virgin deployment
export DISABLE_HOURLY="0"
export SERVER_TIMEZONE_CONTINENT="Europe"
export SERVER_TIMEZONE_CITY="London"
export BASELINE_DB_REPOSITORY="VIRGIN"
export BUILD_ARCHIVE_CHOICE="virgin"
export APPLICATION_LANGUAGE="PHP"
----- export APPLICATION_IDENTIFIER="1"
----- export PHP_VERSION="8.0"
export REGION=""
export REGION_ID="eu-central"
export DB_SIZE="g6-nanode-1"
export DB_SERVER_TYPE="g6-nanode-1"
export WS_SIZE="g6-nanode-1"
export WS_SERVER_TYPE="g6-nanode-1"
export AS_SIZE="g6-nanode-1"
export AS_SERVER_TYPE="g6-nanode-1"
export CLOUDHOST="linode"
export MACHINE_TYPE="LINODE"
export ALGORITHM="rsa"
export USER="root"
export CLOUDHOST_USERNAME="root"
----- export CLOUDHOST_PASSWORD="kwshf934^Gyd£" #You can set this to whatever you like as long as it is secure and set
export PUBLIC_KEY_NAME="AGILE_TOOLKIT_PUBLIC_KEY"
export PREVIOUS_BUILD_CONFIG="0"
export GIT_USER="Templated User"
export GIT_EMAIL_ADDRESS="templateduser@dummyemailZ123.com"
export INFRASTRUCTURE_REPOSITORY_PROVIDER="github"
export INFRASTRUCTURE_REPOSITORY_OWNER="agile-deployer"
export INFRASTRUCTURE_REPOSITORY_USERNAME="agile-deployer"
export INFRASTRUCTURE_REPOSITORY_PASSWORD="none"
export DATASTORE_CHOICE="linode"
export SSL_GENERATION_METHOD="AUTOMATIC"
export SSL_GENERATION_SERVICE="LETSENCRYPT"
export BYPASS_DB_LAYER="0"
export DBaaS_HOSTNAME=""
export DBaaS_USERNAME=""
export DBaaS_PASSWORD=""
export DBaaS_DBNAME=""
export DATABASE_DBaaS_INSTALLATION_TYPE=""
export DBaaSDBSECURITYGROUP=""
export DBIP=""
export DBIP_PRIVATE=""
export WSIP=""
export WSIP_PRIVATE=""
export ASIP=""
export ASIP_PRIVATE=""
export APPLICATION_NAME=""
export MAPS_API_KEY=""
export PHP_MODE=""
export PHP_MAX_CHILDREN=""
export PHP_START_SERVERS=""
export PHP_MIN_SPARE_SERVERS=""
export PHP_MAX_SPARE_SERVERS=""
export PHP_PROCESS_IDLE_TIMEOUT=""
export IN_MEMORY_CACHING=""
export IN_MEMORY_CACHING_PORT=""
export IN_MEMORY_CACHING_HOST=""
export IN_MEMORY_CACHING_SECURITY_GROUP=""
export ENABLE_EFS=""
export SUBNET_ID=""
export AUTOSCALE_FROM_SNAPSHOTS=""
export GENERATE_SNAPSHOTS=""
export SNAPSHOT_ID=""
export WEBSERVER_IMAGE_ID=""
export AUTOSCALER_IMAGE_ID=""
export DATABASE_IMAGE_ID=""
export BUILD_HOME=""
export BUILD_CLIENT_IP=""
export PUBLIC_KEY_ID=""
</code></pre></div>  </div>
</blockquote>

<p>If all the dashes I have added are removed, then this file (with live values and not symbolic ones) would be ready for deployment.</p>

<p>You now need to copy your template as follows:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/bin/mkdir ./agile-infrastructure-build-client-scripts/overridescripts/
/bin/cp ./agile-infrastructure-build-client-scripts/templatedconfigurations/templates/linode/linode1.tmpl ./agile-infrastructure-build-client-scripts/overridescripts/linode1override.tmpl  
</code></pre></div>  </div>
</blockquote>

<p>Then you need to run the script:</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd helperscripts
</code></pre></div>  </div>
</blockquote>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./GenerateOverrideTemplate.sh  (make sure you review and set all **ALL** of the settings - reviewing them generates the stackscript) **ESSENTIAL NOTE: with the GenerateOverrideTemplate scipt above, you need to review every setting for the stack script to be generated**
</code></pre></div>  </div>
</blockquote>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./GenerateHardcoreUserDataScript.sh stack
</code></pre></div>  </div>
</blockquote>

<p>This will leave you with a script:</p>

<blockquote>
  <p>../userdatascripts/${userdatascript}</p>
</blockquote>

<p>where ${userdatascript} is the descriptive name you gave when prompted.</p>

<p>This is a Stack Script - if you don’t understand Stack Scripts you can read:</p>

<p><a href="https://www.linode.com/docs/guides/writing-scripts-for-use-with-linode-stackscripts-a-tutorial/">Stack Script Tutorial</a>.</p>

<p><strong>You need to:</strong></p>

<ol>
  <li>take a copy of the userdata script (the whole thing) by copying it and pasting it to create a Stack Script out of it.</li>
  <li>You then need to populate the main variables and modify (if you need to, the advanced ones) of the Stack Script as you ususally would.</li>
  <li>You then need to create a linode from your Stack Script.</li>
</ol>

<p>At this point, your build machine should be up and running. Please review</p>

<p><a href="https://github.com/agile-deployer/agile-infrastructure-build-client-scripts/blob/master/doco/AgileToolkitDeployment/TightenBuildMachineAccess.md">Tighten Build Machine</a></p>

<p>At this point, your build machine will only accept connections from your laptop. If you need access from other ip addresses you need to use the technique described in “Tightening Build Machine Access” to grant access to additional IP addresses. This will be the case every time your laptop changes its IP address as you travel about, so, you might want to setup and configure an S3 client on your laptop to enable you to grant access to new IP addresses easily.</p>

<hr />

<p>Assuming that you have your Joomla application online now after following that video, what I would do if I wanted to build a Wordpress, Moodle or Drupal installation would be to follow the same procedure with the same template, but, minimally change the stackscript parameters as follows:</p>

<h4 id="for-wordpress">For Wordpress:</h4>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>APPLICATION="wordpress"
APPLICATION_BASELINE_SOURCECODE_REPOSITORY="WORDPRESS" #MANDATORY 
APPLICATION_IDENTIFIER="2"
DATABASE_INSTALLATION_TYPE="MySQL" #I don't support Wordpress using Postgres
</code></pre></div>  </div>
</blockquote>

<h4 id="for-drupal">For Drupal:</h4>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>APPLICATION="drupal"
DRUPAL_VERSION="9.2.6" 
APPLICATION_BASELINE_SOURCECODE_REPOSITORY="DRUPAL:9.2.6" #MANDATORY 
APPLICATION_IDENTIFIER="3"
</code></pre></div>  </div>
</blockquote>

<h4 id="for-moodle">For Moodle:</h4>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>APPLICATION="moodle"
APPLICATION_BASELINE_SOURCECODE_REPOSITORY="MOODLE" #MANDATORY 
APPLICATION_IDENTIFIER="4"
</code></pre></div>  </div>
</blockquote>

<p>So, you have a stackscript now that you can use over and over again for deploying different installations of these CMS systems. You can study the spec and learn how to modify the stackscript in order to change machine sizes, regions, PHP settings and so on.</p>

  </div><a class="u-url" href="/adtlinodetutorialshardcorevirgin/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>The main website for the codebreakers project</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/fastai" target="_blank" title="fastai"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/fastdotai" target="_blank" title="fastdotai"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
